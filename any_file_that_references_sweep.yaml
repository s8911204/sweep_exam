import os

def replace_string_in_file(file_path, old_string, new_string):
    try:
        with open(file_path, 'r') as file:
            file_data = file.read()
    except IOError as e:
        print(f"Error reading file {file_path}: {e}")
        return

    file_data = file_data.replace(old_string, new_string)

    try:
        with open(file_path, 'w') as file:
            file.write(file_data)
    except IOError as e:
        print(f"Error writing to file {file_path}: {e}")
        return

def search_and_replace_in_files(directory, old_string, new_string):
    for foldername, subfolders, filenames in os.walk(directory):
        for filename in filenames:
            file_path = os.path.join(foldername, filename)
            replace_string_in_file(file_path, old_string, new_string)

def rename_file_in_directory(directory, old_filename, new_filename):
    for foldername, subfolders, filenames in os.walk(directory):
        for filename in filenames:
            if filename == old_filename:
                old_file_path = os.path.join(foldername, filename)
                new_file_path = os.path.join(foldername, new_filename)
                if os.path.exists(new_file_path):
                    print(f"Cannot rename {old_file_path} to {new_file_path} because a file with the new name already exists.")
                    continue
                try:
                    os.rename(old_file_path, new_file_path)
                except OSError as e:
                    print(f"Error renaming file {old_file_path} to {new_file_path}: {e}")
                    continue

def search_and_replace_in_docs(directory, old_string, new_string):
    for foldername, subfolders, filenames in os.walk(directory):
        for filename in filenames:
            if filename.endswith(('.txt', '.md')):
                file_path = os.path.join(foldername, filename)
                replace_string_in_file(file_path, old_string, new_string)

rename_file_in_directory('.', 'sweep.yaml', 'sweep-config.yaml')
search_and_replace_in_files('.', 'sweep.yaml', 'sweep-config.yaml')
search_and_replace_in_docs('.', 'sweep.yaml', 'sweep-config.yaml')

rename_file_in_directory('.', 'sweep.yaml', 'sweep-config.yaml')
search_and_replace_in_files('.', 'sweep.yaml', 'sweep-config.yaml')
